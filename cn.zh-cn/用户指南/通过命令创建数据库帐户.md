# 通过命令创建数据库帐户<a name="dds_03_0057"></a>

## 操作场景<a name="section6515110014278"></a>

为了更方便地管理文档数据库实例，创建数据库实例后，您可以通过命令为其创建数据库帐户，以及更改帐户的密码。

>![](public_sys-resources/icon-note.gif) **说明：**   
>为目标实例创建数据库帐户时，建议您开启SSL通道，提高数据的安全性。  

## 使用限制<a name="section922375095016"></a>

对于已有的3.2版本的文档数据库实例，不支持创建数据库帐户，仅可更改管理员帐户rwuser的密码。

## 前提条件<a name="section42310965142628"></a>

成功连接文档数据库实例，请参见《文档数据库服务快速入门》各实例类型下，通过内网和公网连接实例的内容。

## 帐户说明<a name="section21810854151259"></a>

为了给文档数据库实例提供管理服务，您在创建数据库实例时，文档数据库服务会自动为实例创建root（或admin）、monitor和backup帐户。如果试图删掉、重命名、修改这些帐户的密码和权限，会导致出错。

对于数据库管理员帐户rwuser，以及您所创建的帐户，允许修改帐户的密码。

## 帐户密码等级设置<a name="section330367810910"></a>

-   文档数据库服务在控制台侧管理员密码的安全策略：
    -   密码长度为8～32个字符。
    -   密码必须为英文大小写字母、数字、特殊字符\~!@\#%^\*-\_=+?的组合。

-   文档数据库对在客户端新创的数据库用户，设置了密码安全策略：
    -   密码长度为8～32个字符。
    -   密码必须为英文大小写字母、数字、特殊字符\~@\#%-\_!\*+=^?的组合。


创建实例数据库时，为用户提供了密码复杂度校验，由于rwuser用户可以修改密码复杂度，安全起见，建议修改后的密码复杂度不低于最初设置的。

## 创建帐户<a name="section2493797710952"></a>

1.  选择admin数据库。

    **use admin**

2.  以user1帐户为例，创建数据库帐户。

    **db.createUser\(\{user: "user1", pwd: "**_Test\_12345_**", passwordDigestor:"server", roles:\[\{role: "root", db: "admin"\}\]\}\)**

    -   “_server_”是指在服务端加密密码。
    -   “_Test\_12345_”是新密码，长度8～32位，且必须为英文大小写字母、数字以及特殊字符\~@\#%-\_!\*+=^?的组合。
    -   “roles”限制了该帐户所具有的权限。若指定一个空数组，表示该帐户不具有任何权限。

3.  查看创建结果。

    显示如下信息，说明创建成功。

    ```
    Successfully added user: {
            "user" : "user1",
            "passwordDigestor" : "server",
            "roles" : [
                    {
                            "role" : "root",
                            "db" : "admin"
                    }
            ]
    }
    ```


## 更改帐户的密码<a name="section44669932101727"></a>

1.  选择admin数据库。

    **use admin**

2.  以user1帐户为例，修改帐户的密码。

    **db.updateUser\("user1", \{passwordDigestor:"server",pwd:"newPasswd12\#"\}\)**

    -   “_server_”是指在服务端加密密码。
    -   “_newPasswd12\#_”是新密码，长度8～32位，且必须为英文大小写字母、数字以及特殊字符\~@\#%-\_!\*+=^?的组合。

3.  查看修改结果。显示如下信息，说明修改成功。
    -   集群

        ```
        mongos>
        ```

    -   副本集

        ```
        replica:PRIMARY>
        ```

    -   单节点

        ```
        replica:PRIMARY>
        ```



