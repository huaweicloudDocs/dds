# 添加集群实例的节点（社区版）<a name="zh-cn_topic_increase_nodes"></a>

## 操作场景<a name="section34286219201027"></a>

随着业务数据的增加，原来申请的数据库节点数量不能满足需求。这时您需要对实例进行新增节点。

>![](public_sys-resources/icon-note.gif) **说明：**   
>-   账户余额大于等于0元，才可添加节点。  
>-   实例状态为正常、删除备份中和恢复检查中时可以添加节点。  
>-   实例进行添加节点时，该实例不可被删除。  

## 添加mongos<a name="section51046890162836"></a>

1.  [登录文档数据库服务](https://support.huaweicloud.com/qs-dds/dds_02_0043.html)。
2.  在“实例管理“页面，选择指定的集群实例，单击实例名称。
3.  在“基本信息“页面的“节点信息“区域，选择“mongos“页签，单击“添加mongos“。

    **图 1**  节点信息<a name="fig57311143618"></a>  
    ![](figures/节点信息.png "节点信息")

4.  在“添加mongos”页面，选择可用区、性能规格、节点数量和参数组，单击“下一步”。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >对于跨可用区部署的集群实例，可以选择将新增mongos节点部署在主可用区或备可用区，关于跨可用区部署集群实例的信息，请参见[购买实例（社区版）](https://support.huaweicloud.com/qs-dds/dds_02_0008.html)。  

    **图 2**  添加mongos<a name="fig167112521835"></a>  
    ![](figures/添加mongos.png "添加mongos")

    社区版集群实例最多支持16个mongos节点。

5.  在确认页面，确认节点配置信息。
    -   包年/包月
        -   如需重新选择，单击“上一步”，修改相关配置。
        -   核对无误后，单击“提交订单”，进入付款页面，选择支付方式，完成支付。

    -   按需计费
        -   如需重新选择，单击“上一步”，修改相关配置。
        -   核对无误后，单击“提交“，开始添加节点。

6.  查看添加节点结果。
    -   添加节点过程中，实例运行状态显示为“节点扩容中”，此过程约10～15分钟。
    -   在实例列表的右上角，单击![](figures/kwx318612-GAUSS-DBaaS-image-dbe6bb50-e0f5-42a9-91be-08aab27832dc.png)刷新列表，可看到添加节点完成的实例的运行状态显示为“正常”。
    -   在实例“基本信息”页面的“节点信息“区域，选择“mongos”页签，可查看新增mongos节点信息。
    -   若添加mongos节点失败，可进行批量回退或单个删除操作，详见[回退集群实例的节点（社区版）](回退集群实例的节点（社区版）.md)。


## 添加shard<a name="section3495337616353"></a>

1.  [登录文档数据库服务](https://support.huaweicloud.com/qs-dds/dds_02_0043.html)。
2.  在“实例管理“页面，选择指定的集群实例，单击实例名称。
3.  在“基本信息“页面的“节点信息“区域，选择“shard“页签，单击“添加shard“。

    **图 3**  节点信息<a name="fig12241154503711"></a>  
    ![](figures/节点信息-8.png "节点信息-8")

4.  在“添加shard”页面，选择新增shard对应的性能规格、存储空间、节点数量和参数组，单击“下一步“。

    **图 4**  添加shard<a name="fig56091327566"></a>  
    ![](figures/添加shard.png "添加shard")

    -   申请的存储空间会有必要的文件系统开销，包括索引节点和保留块，以及数据库运行必需的空间。存储空间的数值必须为10的整数倍。
    -   社区版集群实例最多支持16个shard节点。

5.  在确认页面，确认节点配置信息。
    -   包年/包月
        -   如需重新选择，单击“上一步”，修改相关配置。
        -   核对无误后，单击“提交订单”，进入付款页面，选择支付方式，完成支付。

    -   按需计费
        -   如需重新选择，单击“上一步”，修改相关配置。
        -   核对无误后，单击“提交“，开始添加节点。

6.  查看添加节点结果。
    -   添加节点过程中，实例运行状态显示为“节点扩容中”，此过程约10～15分钟。
    -   在实例列表的右上角，单击![](figures/kwx318612-GAUSS-DBaaS-image-dbe6bb50-e0f5-42a9-91be-08aab27832dc.png)刷新列表，可看到添加节点完成的实例的运行状态显示为“正常”。
    -   在实例“基本信息”页面的“节点信息“区域，选择“shard”页签，可查看新增shard节点信息。
    -   若添加shard节点失败，可进行批量回退或单个删除操作，详见[回退集群实例的节点（社区版）](回退集群实例的节点（社区版）.md)。


